<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Writing your own path planning algorithm in ROS</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css%3Fv=0756a0348a.css" />

    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="Shalutha&#x27;s Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Writing your own path planning algorithm in ROS" />
    <meta property="og:description" content="In this article I will focus on writing and adding D* Lite algorithm as a path planner plugin in ROS, so that you can try out your customized path planning algorithms and evaluate their performance in ROS simulation environment before going into the real world." />
    <meta property="og:url" content="http://localhost:2368/writing-your-own-path-planning-algorithm-in-ros/" />
    <meta property="og:image" content="http://localhost:2368/content/images/2021/03/post-image-1.png" />
    <meta property="article:published_time" content="2021-01-12T20:12:15.000Z" />
    <meta property="article:modified_time" content="2021-03-21T08:43:15.000Z" />
    <meta property="article:publisher" content="https://www.facebook.com/ghost" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Writing your own path planning algorithm in ROS" />
    <meta name="twitter:description" content="In this article I will focus on writing and adding D* Lite algorithm as a path planner plugin in ROS, so that you can try out your customized path planning algorithms and evaluate their performance in ROS simulation environment before going into the real world." />
    <meta name="twitter:url" content="http://localhost:2368/writing-your-own-path-planning-algorithm-in-ros/" />
    <meta name="twitter:image" content="http://localhost:2368/content/images/2021/03/post-image-1.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Shalutha Rajapakshe" />
    <meta name="twitter:site" content="@ghost" />
    <meta property="og:image:width" content="800" />
    <meta property="og:image:height" content="502" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Shalutha&#x27;s Blog",
        "url": "http://localhost:2368/",
        "logo": {
            "@type": "ImageObject",
            "url": "http://localhost:2368/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Shalutha Rajapakshe",
        "url": "http://localhost:2368/author/shalutha/",
        "sameAs": []
    },
    "headline": "Writing your own path planning algorithm in ROS",
    "url": "http://localhost:2368/writing-your-own-path-planning-algorithm-in-ros/",
    "datePublished": "2021-01-12T20:12:15.000Z",
    "dateModified": "2021-03-21T08:43:15.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:2368/content/images/2021/03/post-image-1.png",
        "width": 800,
        "height": 502
    },
    "description": "In this article I will focus on writing and adding D* Lite algorithm as a path planner plugin in ROS, so that you can try out your customized path planning algorithms and evaluate their performance in ROS simulation environment before going into the real world.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:2368/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.40" />
    <link rel="alternate" type="application/rss+xml" title="Shalutha&#x27;s Blog" href="../rss/index.html" />

</head>
<body class="post-template">

    <div class="site-wrapper">

        

<header class="site-header">
    <div class="outer site-nav-main">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left-wrapper">
        <div class="site-nav-left">
                <a class="site-nav-logo" href="../index.html">Shalutha&#x27;s Blog</a>
            <div class="site-nav-content">
                    <ul class="nav">
    <li class="nav-home"><a href="../index.html">Home</a></li>
    <li class="nav-tag"><a href="http://localhost:2368/tag/getting-started/">Tag</a></li>
    <li class="nav-author"><a href="http://localhost:2368/author/ghost/">Author</a></li>
    <li class="nav-help"><a href="https://ghost.org/docs/">Help</a></li>
</ul>

                    <span class="nav-post-title dash">Writing your own path planning algorithm in ROS</span>
            </div>
        </div>
    </div>
    <div class="site-nav-right">
            <ul class="nav">
    <li class="nav-terms"><a href="../index.html">Terms</a></li>
    <li class="nav-contact"><a href="../index.html">Contact</a></li>
</ul>


    </div>
</nav>
    </div>
</div></header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post ">

            <header class="post-full-header">


                <h1 class="post-full-title">Writing your own path planning algorithm in ROS</h1>

                <p class="post-full-custom-excerpt">In this article I will focus on writing and adding D* Lite algorithm as a path planner plugin in ROS, so that you can try out your customized path planning algorithms and evaluate their performance in ROS simulation environment before going into the real world.</p>

                <div class="post-full-byline">

                    <section class="post-full-byline-content">

                        <ul class="author-list">
                            <li class="author-list-item">

                                <div class="author-card">
                                    <div class="author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg>
</div>
                                    <div class="author-info">
                                        <h2>Shalutha Rajapakshe</h2>
                                        <p>Read <a href="../author/shalutha/index.html">more posts</a> by this author.</p>
                                    </div>
                                </div>

                                <a href="../author/shalutha/index.html" class="author-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg>
</a>

                            </li>
                        </ul>

                        <section class="post-full-byline-meta">
                            <h4 class="author-name"><a href="../author/shalutha/index.html">Shalutha Rajapakshe</a></h4>
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2021-01-13">13 Jan 2021</time>
                                <span class="byline-reading-time"><span class="bull">&bull;</span> 6 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>

            <figure class="post-full-image">
                <img
                    srcset="../content/images/size/w300/2021/03/post-image-1.png 300w,
                           ../content/images/size/w600/2021/03/post-image-1.png 600w,
                          ../content/images/size/w1000/2021/03/post-image-1.png 1000w,
                         ../content/images/size/w2000/2021/03/post-image-1.png 2000w"
                    sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px"
                    src="../content/images/size/w2000/2021/03/post-image-1.png"
                    alt="Writing your own path planning algorithm in ROS"
                />
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <hr><p>Path planning is an important and a significant area in the robotics field. Mobile robots are capable of finding an optimal or a near optimal path from the starting location to a destination based on metrics such as shortest way, quickest way, easiest way, etc. while avoiding collision with obstacles in the operating environment.</p><p>According to the level of information known about the operating environment, path planning can be mainly divided into two types.</p><p>1. <strong>Path planning based on global map information</strong></p><blockquote>This is called global path planning and the information about the operating environment should be completely known for this. In other words, a map should be needed for global path planning.</blockquote><p>2.<strong> Path planning based on local map information</strong></p><blockquote>This is called local path planning. Local path planning focuses on the information observed through the sensors of the robot to find a path from starting location to destination while avoiding obstacles.</blockquote><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn-images-1.medium.com/max/800/1*HgHYCLD1KvaC06oSITRrJQ.jpeg" class="kg-image" alt><figcaption>Global plan given by global planner &amp; local plan given by local&nbsp;planner</figcaption></figure><p>What usually happens is first we give our robot a map that we previously built. Map building is a broad field and I will skip that part here. Usually <strong>Simultaneous Localization and Mapping(SLAM)</strong> is used for map building and there are several SLAM methods like <strong>gmapping</strong>, <strong>Hector slam</strong>, <strong>wild-cat slam</strong>, etc. can be used for that purpose.</p><p>So when we have our map, the global path planning algorithm will use that map to generate paths from point to point on that map. It doesn’t care about the sensor information or doesn’t know about new obstacles appearing within the map after the map creation instance, it only uses the static map given for it to calculate the paths. So we cannot only use the global path planning for navigation if our environment is dynamic which is more often the common thing in real world applications.</p><p>This is where local path planning comes into play. Now the robot has a map and a path to follow to its destination. While following the path given from the global path planner, the local path planner will collect information from its sensors and recalculate paths, avoiding any newly appeared or dynamic obstacles within its sensor range. Or in other words the local planner creates his own small map according to the sensor information and uses it for navigation.</p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="https://cdn-images-1.medium.com/max/800/1*xo6QCKPBn0fmmuwWSDt3EA.jpeg" class="kg-image" alt><figcaption>Static map given to the global planner &amp; Local map created by sensor information</figcaption></figure><p>So in this way the global path planning and local path planning achieves navigation.</p><hr><p><strong>Robot Operating System(ROS)</strong> is an open source framework for writing software related to robots. It includes a collection of tools, libraries and conventions which targets to simplify the creation of complex robot applications across a wide variety of robotic platforms. The amount of robots that use ROS in the scientific community and industry are growing very fast. The built-in ROS simulator <strong>Gazebo</strong> is a widely used simulator in all over the world. It also comes with a physical engine for gravity, inertia, illumination etc. for a real world experience. Even NASA uses this simulator to simulate their robots used for planetary exploration. In this article I will focus on writing and adding D* Lite algorithm as a path planner plugin in ROS, so that you can try out your customized path planning algorithms and evaluate their performance in ROS simulation environment before going into the real world.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/800/1*U2HhTNFTipyZESd-NeU7LA.jpeg" class="kg-image" alt></figure><p>I followed this excellent <a href="http://wiki.ros.org/navigation/Tutorials/Writing%20A%20Global%20Path%20Planner%20As%20Plugin%20in%20ROS" rel="noopener"><strong>tutorial </strong></a>written by Dr. Anis Kouba in ROS wiki regarding the integration of a <strong>global path planner plugin</strong> in ROS. So the steps are as below for ROS Noetic version.</p><hr><p>First of all, lets create a new ROS package with required dependencies. The global path planner we are writing must adhere to <strong>nav_core::BaseGlobalPlanner</strong> which is a C++ interface in <strong>nav_core</strong> package that includes key interfaces for the navigation stack. So our package must depend on nav_core. Other than that our package must depend on <strong>roscpp</strong>; which provides a library to interface ROS with C++,<strong> rospy</strong>; which provides a library to interface ROS with python and <strong>std_msgs</strong>; which includes standard ROS messages used in ROS communication. Don’t worry if you forgot to include any of these dependent packages at the beginning, you can always add necessary dependencies later onwards because sometimes we cannot exactly say these are the only packages we require for our work. But for today, we will include the necessary dependencies at the package creating instance. So open a new terminal, go to your workspace’s “<strong>src”</strong> folder and write the following command in the terminal to create your new path planner package. Since I’m creating a D*lite planner I will name my package as dstar_lite_planner</p><blockquote><strong><em>catkin_create_pkg dstar_lite_planner nav_core roscpp rospy std_msgs</em></strong></blockquote><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/800/1*dAaUpsXC0Q2YZdyRSnAjPg.jpeg" class="kg-image" alt></figure><p>Now your package has been created. Now it’s time to write the path planner class which is needed for our planner. Go to the “<strong>src</strong>” folder inside your package and create a new header file and a source file. You can give any name you want.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/800/1*pu1zPkTXL7Sm_hD-dMNkHA.gif" class="kg-image" alt></figure><p>I have provided two template files added with some comments that uses D* lite algorithm for global path planning. You can use those files to write your own path planner algorithm. You just have to fill the necessary functions in order to make it work. A proper explanation about the content of these files can be found from Dr. Anis Kouba’s tutorial I mentioned earlier. and finally the output path should be given as a vector.</p><p>You can find the template files from my <a href="https://github.com/ShaluthaRajapakshe/dstar_lite_planner.git" rel="noopener"><strong>Github</strong></a> repo.</p><p>Now we have completed writing our global path planner class. So we should compile it now. For that, add the following line to your newly created package’s <strong>CMakeLists.txt </strong>file.</p><!--kg-card-begin: html--><script src="https://gist.github.com/ShaluthaRajapakshe/e394818c25b285ddfcd573b00d40b3d7.js"></script>
<!--kg-card-end: html--><p>Then in terminal go to catkin_ws directory and run catkin_make. Now you can see your library file created at the directory: <strong>/catkin_ws/devel/lib </strong>with the name<strong> libd_star_planner.so</strong></p><p>Now it is time to deploy our path planner as a plugin in ROS. For that first we should create the plugin description file, inside the package we created.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/800/1*c1941w9Jpf6XqgZ9pN_5IA.gif" class="kg-image" alt></figure><p>Then the information about your plugin should be added to that file. Add the following information according to your planner’s details inside the plugin description file.</p><!--kg-card-begin: html--><script src="https://gist.github.com/ShaluthaRajapakshe/558de617f360067fb69ce523d2f8044e.js"></script><!--kg-card-end: html--><p>Rename the <strong>path</strong> with your created library file’s name inside the lib folder. Then change the <strong>name</strong> and<strong> type</strong> according to your path planner class and finally add a description describing your path planner plugin.</p><p>Now to finish the deploying process, we should register our path planner plugin created above. For that we should add the following code with the plugin description file’s name we created, into the package.xml file of our package.</p><!--kg-card-begin: html--><script src="https://gist.github.com/ShaluthaRajapakshe/f4d5e8cea2304c85e6fe736e69725c27.js"></script><!--kg-card-end: html--><p>Congratulations!. Now you have successfully deployed your path planner plugin in the ROS environment. For verification, type this command in your terminal and see whether your plugin is shown.</p><blockquote><strong>rospack plugins — attrib=plugin nav_core</strong></blockquote><p>Now you can add this plugin to any of your robot’s navigation stack and use it for navigation purposes. What you have to do is add the planner as shown in the following image as one your move_base package’s parameters.</p><figure class="kg-card kg-image-card"><img src="https://cdn-images-1.medium.com/max/800/1*afSjmAClyHfhWlXiyj1cJQ.jpeg" class="kg-image" alt></figure><p>In a future article I will explain the steps to add this plugin on Turtlebot3 - Waffle which is a famous robot among the ROS community.</p>
                </div>
            </section>



        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">


        </div>
    </div>
</aside>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../index.html">Shalutha&#x27;s Blog</a> &copy; 2021</section>
                <nav class="site-footer-nav">
                    <a href="../index.html">Latest Posts</a>
                    <a href="https://www.facebook.com/ghost" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/ghost" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
    </script>
    <script src="../assets/built/casper.js%3Fv=0756a0348a"></script>

    <script>
        // Parse the URL parameter
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Give the parameter a variable name
        var action = getParameterByName('action');
        var success = getParameterByName('success');

        $(document).ready(function () {
            if (action == 'subscribe' && (success === null || success === 'true')) {
                $('body').addClass('subscribe-success');
            }

            if (action == 'subscribe' && success === 'false') {
                $('body').addClass('subscribe-failure');
            }

            $('.subscribe-notification .subscribe-close-button').click(function () {
                $('.subscribe-notification').addClass('close');
            });

            // Reset form on opening subscrion overlay
            $('.subscribe-button').click(function() {
                $('.subscribe-overlay form').removeClass();
                $('.subscribe-email').val('');
            });
        });
    </script>

    <script>
    $(document).ready(function () {
        // FitVids - start
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // FitVids - end

        // Replace nav with title on scroll - start
        Casper.stickyNavTitle({
            navSelector: '.site-nav-main',
            titleSelector: '.post-full-title',
            activeClass: 'nav-post-title-active'
        });
        // Replace nav with title on scroll - end

        // Hover on avatar
        var hoverTimeout;
        $('.author-list-item').hover(function () {
            var $this = $(this);

            clearTimeout(hoverTimeout);

            $('.author-card').removeClass('hovered');
            $(this).children('.author-card').addClass('hovered');

        }, function () {
            var $this = $(this);

            hoverTimeout = setTimeout(function () {
                $this.children('.author-card').removeClass('hovered');
            }, 800);
        });
    });
</script>


    

</body>
</html>
